<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ì–´ë©”ì´ì§•ì‚¬ì—…ë¶€ ë¸”ë¡œê·¸ ìë™í™”</title>
  <style>
    :root{
      --bg1:#f8fbff; --bg2:#fff7fd; --card:#ffffffcc; --ink:#111827; --ring:#9b87f5;
      --accent:#7c3aed; --accent2:#9b87f5;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;color:var(--ink);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 600px at 12% -8%, var(--bg2), transparent 60%),
        radial-gradient(900px 600px at 108% 8%, #eaf2ff, transparent 55%),
        linear-gradient(180deg, var(--bg1), #fff);
      display:grid;place-items:center;padding:28px;
    }
    .wrap{width:100%;max-width:720px}
    .top{
      display:flex;align-items:center;gap:14px;margin-bottom:12px
    }
    .sticker{
      width:56px;height:56px;border-radius:16px;display:grid;place-items:center;overflow:hidden;
      background:linear-gradient(135deg,#fef3c7,#fde68a);border:1px solid #fcd34d;
      box-shadow:inset 0 0 0 3px #ffffffb8,0 8px 22px #f59e0b33;
    }
    .card{
      background:var(--card);border:1px solid #eef2ff;border-radius:20px;backdrop-filter:blur(8px);
      box-shadow:0 10px 30px #00000010;padding:18px 18px 16px;
    }
    /* compact input */
    .ask{
      display:flex;align-items:center;gap:8px;background:#fff;border:1.5px solid #e5e7eb;
      border-radius:999px;padding:10px 10px 10px 14px; box-shadow:0 2px 8px #00000008;
      transition:box-shadow .2s,border .2s;
    }
    .ask:focus-within{border-color:var(--ring); box-shadow:0 0 0 4px #9b87f522}
    .ask input{
      flex:1;border:0;outline:none;font-size:15px;background:transparent;
      padding:6px 2px; min-height:22px;
    }
    .send{
      border:0;cursor:pointer; padding:10px 14px;border-radius:999px;color:#fff;
      background:linear-gradient(135deg,var(--accent2),var(--accent));
      box-shadow:0 8px 18px #7c3aed33, inset 0 -6px 12px #00000014;
      display:inline-flex;align-items:center;gap:8px;font-weight:700;
      transition:transform .06s, filter .15s;
    }
    .send:hover{filter:brightness(1.04)}
    .send:active{transform:translateY(1px)}
    .send[disabled]{opacity:.65;cursor:not-allowed}
    .chipbar{
      display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:10px;font-size:12px;color:#6b7280
    }
    .res{
      margin-top:14px;background:#fff;border:1px solid #eef2ff;border-radius:16px;padding:14px;min-height:130px;
      white-space:pre-wrap;line-height:1.6
    }
    .spin{width:16px;height:16px;border-radius:50%;border:2px solid #ffffff80;border-top-color:#fff;display:inline-block;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* tiny helper button row */
    .helpers{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .helper{
      font-size:12px;border:1px dashed #e5e7eb;background:#fff;border-radius:999px;padding:6px 10px;cursor:pointer;
    }
    .helper:hover{border-color:#c7d2fe}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="sticker" aria-hidden="true">
        <!-- cute inline SVG (no external file) -->
        <svg viewBox="0 0 80 80" width="46" height="46">
          <defs>
            <linearGradient id="g" x1="0" x2="1">
              <stop offset="0" stop-color="#fef3c7"/><stop offset="1" stop-color="#fde68a"/>
            </linearGradient>
          </defs>
          <circle cx="40" cy="40" r="28" fill="url(#g)" stroke="#fbbf24" stroke-width="2"/>
          <circle cx="32" cy="35" r="4" fill="#1f2937"/>
          <circle cx="48" cy="35" r="4" fill="#1f2937"/>
          <path d="M28 49 Q40 58 52 49" stroke="#1f2937" stroke-width="3" fill="none" stroke-linecap="round"/>
          <path d="M18 26 26 18 M54 18 62 26" stroke="#f59e0b" stroke-width="3" stroke-linecap="round"/>
        </svg>
      </div>
      <h1 style="font-size:20px;margin:0">ì–´ë©”ì´ì§•ì‚¬ì—…ë¶€ ë¸”ë¡œê·¸ ìë™í™”</h1>
    </div>

    <div class="card">
      <div class="ask">
        <input id="q" autocomplete="off" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”" />
        <button id="send" class="send" type="button">
          <span id="sendLabel">Send</span>
          <span aria-hidden="true">ğŸš€</span>
        </button>
      </div>

      <!-- quick example chips (optional, fill input on click). You can delete this block if not needed. -->
      <div class="helpers">
        <button class="helper" data-text="ì‹¤ì†ë³´í—˜ ì²­êµ¬ ì„œë¥˜ ìš”ì•½í•´ì¤˜">ì‹¤ì† ì„œë¥˜ ìš”ì•½</button>
        <button class="helper" data-text="í•­ì•” ì¤‘ì…ì ì¹˜ë£Œ ë³´ì¥ í•µì‹¬ë§Œ ì•Œë ¤ì¤˜">ì¤‘ì…ìì¹˜ë£Œ í•µì‹¬</button>
        <button class="helper" data-text="ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ë³„ ì°¨ì´ë¥¼ í‘œë¡œ ì •ë¦¬í•´ì¤˜">ì¥ê¸°ìš”ì–‘ í‘œì •ë¦¬</button>
      </div>

      <div id="res" class="res"></div>

      <div class="chipbar">
        <span>namespace: <strong>default</strong></span> â€¢
        <span>topK: <strong>10</strong></span>
      </div>
    </div>
  </div>

  <script>
    // Config: change only WEBHOOK_URL (JS strings are English only)
    const WEBHOOK_URL = "https://<your-n8n-domain>/webhook-test/ask"; // use /webhook/ask for production
    const NAMESPACE = "default";
    const TOPK = 10;

    const $ = (s)=>document.querySelector(s);
    const q = $('#q');
    const btn = $('#send');
    const res = $('#res');
    const sendLabel = $('#sendLabel');

    function loading(on){
      if(on){ btn.disabled = true; sendLabel.innerHTML = '<span class="spin"></span>'; }
      else { btn.disabled = false; sendLabel.textContent = 'Send'; }
    }
    async function postJson(url, body){
      const r = await fetch(url,{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(body) });
      const text = await r.text();
      let data; try{ data = JSON.parse(text); }catch{ data = { raw:text }; }
      return { ok:r.ok, status:r.status, data };
    }
    async function send(){
      const query = q.value.trim();
      if(!query){ q.focus(); return; }
      res.textContent = '';
      loading(true);
      try{
        const payload = { query, namespace:NAMESPACE, topK:TOPK };
        const r = await postJson(WEBHOOK_URL, payload);
        if(!r.ok){ res.textContent = `HTTP ${r.status}\n` + JSON.stringify(r.data, null, 2); return; }
        const ans = r.data?.answer ?? r.data?.data ?? r.data?.raw ?? r.data;
        res.textContent = (typeof ans === 'string') ? ans : JSON.stringify(ans, null, 2);
      }catch(e){ res.textContent = String(e); }
      finally{ loading(false); }
    }
    btn.addEventListener('click', send);
    q.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); send(); }});
    document.querySelectorAll('.helper').forEach(el=>{
      el.addEventListener('click', ()=>{ q.value = el.dataset.text || ''; q.focus(); });
    });
  </script>
</body>
</html>
